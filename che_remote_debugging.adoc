== Eclipse Che: remote debugging setup

https://eclipse-che.readme.io/docs/[Eclipse Che] has a huge codebase which consists of a dozen of https://github.com/eclipse/che/wiki/Development-Workflow#modules[modules]. Basically, if you work on a separate module it is utterly convenient to have only this particular module imported to the IDE and use the remote debugging approach in order to avoid endless builds and issues like `java.lang.OutOfMemoryError: GC overhead limit exceeded`.
In this article we are going to setup the remote debugging in Eclipse IDE for https://github.com/eclipse/che/tree/master/wsmaster[wsmaster] component as an example. First thing you need to do is to build the component:

....
cd che/wsmaster
mvn clean install
....

After that you need to build the Che assembly: 

....
cd che/assembly/assembly-main
mvn clean install
....

The next step would be building the che-launcher image that is located in separate GitHub https://github.com/eclipse/che-dockerfiles[che-dockerfiles] repository:

....
cd che-dockerfiles/che-launcher
docker build -t codenvy/che-launcher .
....

The final step would be running the che-launcher with several environment variables:

|===
|Variable | Description

|CHE_DEBUG_SERVER
|The variable for enabling the debug mode

|CHE_DEBUG_SERVER_PORT
|The remote debugging port

|CHE_LOCAL_BINARY
|The path to a Che assembly that is on your host to be used instead of the binary contained within the che-server image
|===

The build command itself looks like this:
....
docker run -t -v /var/run/docker.sock:/var/run/docker.sock -e "CHE_DEBUG_SERVER=true" -e "CHE_DEBUG_SERVER_PORT=9999" -e "CHE_LOCAL_BINARY=/home/git/che/assembly/assembly-main/target/eclipse-che-5.0.0-M5-SNAPSHOT/eclipse-che-5.0.0-M5-SNAPSHOT" codenvy/che start
....

NOTE: `CHE_LOCAL_BINARY` value must be amended in order to reflect the path to assembly specific to your machine.

Che is now running on http://localhost:8080/

Now it is time to setup Eclipse. First of all, import the *wsmaster* component via *File -> Import...-> Existing Maven Projects*. After that create a new *Remote Java Application* Debug Configuration:

image::images/che-remote-debugging/remote_java_app.png[width="740", height="400", caption="Remote Java Application"]

image::images/che-remote-debugging/remote_che_debug_arrow.png[width="740", height="400", caption="Debug Configuration"]

NOTE: *port* value must be the equal to the `CHE_DEBUG_SERVER_PORT` variable

Congratulations - pressing the "Debug" button is the final IDE setup step! For testing purpose you can navigate to the  http://localhost:8080/swagger/api and debug the REST endpoints directly from Eclipse:

image::images/che-remote-debugging/swagger_cropped.png[width="740", height="500", caption="Debug"]

image::images/che-remote-debugging/eclipse_debug.png[width="740", height="500", caption="Debug"]
